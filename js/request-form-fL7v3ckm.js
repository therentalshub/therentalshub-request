var trhRequestForm=function(e){function t(){var t,r;"undefined"!=typeof trhApp&&(l=e("#trhrf_start_date"),o=e("#trhrf_start_time"),c=e("#trhrf_end_date"),p=e("#trhrf_end_time"),h=e("#trhrf_car"),s=e("#trhrf_pick_loc"),u=e("#trhrf_drop_loc"),_=e("#trhrf_fname"),f=e("#trhrf_lname"),d=e("#trhrf_email"),m=e("#trhrf_phone"),v=e("#trhrf_notes"),b=e("#trhrf_car_name"),g=e("#trhrf_pick_loc_name"),x=e("#trhrf_drop_loc_name"),w=e("#trhrf_flight"),a=e("#trhrf_car_wrap"),n=e("#trhrf_location_wrap"),k=e("#trhrf_flight_wrap"),y=e("#trh-request-form"),h.on("change",function(){b.val(h.find("option:selected").text())}),s.on("change",function(){g.val(s.find("option:selected").text())}),u.on("change",function(){x.val(u.find("option:selected").text())}),t={altInput:!0,altFormat:"F j, Y",dateFormat:"Y-m-d",minDate:(new Date).fp_incr(1)},D=l.flatpickr(t),A=c.flatpickr(t),r=1+trhApp.minDays,A.set("minDate",(new Date).fp_incr(r)),D.config.onChange.push(function(t,a,n){var e=new Date(a).fp_incr(r);A.set("minDate",new Date(a).fp_incr(r)),A.setDate(e)}),t={enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0,defaultDate:trhApp.defaultTime,minuteIncrement:30},o.flatpickr(t),p.flatpickr(t),trhApp.showCars&&(a.css("display","block"),e.post(trh_ajax_obj.ajax_url,{_ajax_nonce:trh_ajax_obj.nonce,action:"therentalshub_get_cars"},function(t){if(!Object.hasOwn(t,"error"))if(trhApp.carsByGroup){var a="";for(i=0;i<t.length;i++){for(a='<optgroup label="Group: '.concat(t[i].group_name,'">'),j=0;j<t[i].cars.length;j++)a+='<option value="'.concat(t[i].cars[j].id,'">').concat(t[i].cars[j].name,"</option>");a+="</optgroup>",h.append(a)}}else for(i=0;i<t.length;i++)h.append(e("<option>",{value:t[i].id,text:t[i].brand+" "+t[i].model+" - "+t[i].gear}))})),trhApp.showLocations&&(n.css("display","block"),e.post(trh_ajax_obj.ajax_url,{_ajax_nonce:trh_ajax_obj.nonce,action:"therentalshub_get_locations"},function(t){if(!Object.hasOwn(t,"error"))for(i=0;i<t.length;i++)s.append(e("<option>",{value:t[i].id,text:t[i].name})),u.append(e("<option>",{value:t[i].id,text:t[i].name}))})),trhApp.showFlightNr&&k.css("display","block"),y.on("submit",function(t){var a,n;t.preventDefault(),""===l.val()||""===o.val()||""===c.val()||""===p.val()||""===_.val()||""===f.val()||""===d.val()?alert(trhApp.lang.warn_fill_fields):(a=y.find(":submit"),n=a.html(),a.html(trhApp.lang.please_wait+"..."),e("#trh-request-failed-alert").css("display","none"),e("#trh-request-success-alert").css("display","none"),e.post(trh_ajax_obj.ajax_url,{_ajax_nonce:trh_ajax_obj.nonce,action:"therentalshub_submit_form",sd:l.val(),st:o.val(),ed:c.val(),et:p.val(),car:h.val(),pick:s.val(),drop:u.val(),fname:_.val(),lname:f.val(),email:d.val(),phone:m.val(),notes:v.val(),carname:b.val(),plocname:g.val(),dlocname:x.val(),flightname:w.val()},function(t){a.html(n),Object.hasOwn(t,"error")?(e("#trh-request-failed-alert").css("display","block"),e(".trh-error-alert").html(t.error)):e("#trh-request-success-alert").css("display","block")}))}))}var l=null,o=null,c=null,p=null,h=null,s=null,u=null,_=null,f=null,d=null,m=null,v=null,b=null,g=null,x=null,w=null,a=null,n=null,k=null,y=null,D=null,A=null;return{init:function(){t()}}}(jQuery,flatpickr);jQuery(document).ready(function(t){trhRequestForm.init()});