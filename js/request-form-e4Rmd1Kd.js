var trhRequestForm=function(e){function t(){var t,n;"undefined"!=typeof trhApp&&(l=e("#trhrf_start_date"),o=e("#trhrf_start_time"),c=e("#trhrf_end_date"),s=e("#trhrf_end_time"),h=e("#trhrf_car"),u=e("#trhrf_loc"),p=e("#trhrf_fname"),f=e("#trhrf_lname"),_=e("#trhrf_email"),m=e("#trhrf_phone"),d=e("#trhrf_notes"),v=e("#trhrf_car_name"),b=e("#trhrf_loc_name"),g=e("#trhrf_flight"),a=e("#trhrf_car_wrap"),r=e("#trhrf_location_wrap"),x=e("#trhrf_flight_wrap"),w=e("#trh-request-form"),h.on("change",function(){v.val(h.find("option:selected").text())}),u.on("change",function(){b.val(u.find("option:selected").text())}),t={altInput:!0,altFormat:"F j, Y",dateFormat:"Y-m-d",minDate:(new Date).fp_incr(1)},y=l.flatpickr(t),D=c.flatpickr(t),n=1+trhApp.minDays,D.set("minDate",(new Date).fp_incr(n)),y.config.onChange.push(function(t,a,r){var e=new Date(a).fp_incr(n);D.set("minDate",new Date(a).fp_incr(n)),D.setDate(e)}),t={enableTime:!0,noCalendar:!0,dateFormat:"H:i",time_24hr:!0,defaultDate:trhApp.defaultTime,minuteIncrement:30},o.flatpickr(t),s.flatpickr(t),trhApp.showCars&&(a.css("display","block"),e.post(trh_ajax_obj.ajax_url,{_ajax_nonce:trh_ajax_obj.nonce,action:"therentalshub_get_cars"},function(t){if(!Object.hasOwn(t,"error"))if(trhApp.carsByGroup){var a="";for(i=0;i<t.length;i++){for(a='<optgroup label="Group: '.concat(t[i].group_name,'">'),j=0;j<t[i].cars.length;j++)a+='<option value="'.concat(t[i].cars[j].id,'">').concat(t[i].cars[j].name,"</option>");a+="</optgroup>",h.append(a)}}else for(i=0;i<t.length;i++)h.append(e("<option>",{value:t[i].id,text:t[i].brand+" "+t[i].model+" - "+t[i].gear}))})),trhApp.showLocations&&(r.css("display","block"),e.post(trh_ajax_obj.ajax_url,{_ajax_nonce:trh_ajax_obj.nonce,action:"therentalshub_get_locations"},function(t){if(!Object.hasOwn(t,"error"))for(i=0;i<t.length;i++)u.append(e("<option>",{value:t[i].id,text:t[i].name}))})),trhApp.showFlightNr&&x.css("display","block"),w.on("submit",function(t){var a,r;t.preventDefault(),""===l.val()||""===o.val()||""===c.val()||""===s.val()||""===p.val()||""===f.val()||""===_.val()?alert(trhApp.lang.warn_fill_fields):(a=w.find(":submit"),r=a.html(),a.html(trhApp.lang.please_wait+"..."),e("#trh-request-failed-alert").css("display","none"),e("#trh-request-success-alert").css("display","none"),e.post(trh_ajax_obj.ajax_url,{_ajax_nonce:trh_ajax_obj.nonce,action:"therentalshub_submit_form",sd:l.val(),st:o.val(),ed:c.val(),et:s.val(),car:h.val(),loc:u.val(),fname:p.val(),lname:f.val(),email:_.val(),phone:m.val(),notes:d.val(),carname:v.val(),locname:b.val(),flightname:g.val()},function(t){a.html(r),Object.hasOwn(t,"error")?(e("#trh-request-failed-alert").css("display","block"),e(".trh-error-alert").html(t.error)):e("#trh-request-success-alert").css("display","block")}))}))}var l=null,o=null,c=null,s=null,h=null,u=null,p=null,f=null,_=null,m=null,d=null,v=null,b=null,g=null,a=null,r=null,x=null,w=null,y=null,D=null;return{init:function(){t()}}}(jQuery,flatpickr);jQuery(document).ready(function(t){trhRequestForm.init()});